<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="top.lvjp.association.mapper.AssociationMapper">

    <resultMap id="associationIcon" type="PictureVO">
        <id property="id" column="association_id"/>
        <result property="pictureId" column="picture_id"/>
        <result property="pictureTitle" column="association_name"/>
        <result property="picturePath" column="picture_path"/>
    </resultMap>

    <select id="selectById" parameterType="Integer" resultType="association">
        select *
        from association
        where association_id = #{id}
    </select>

    <select id="selectPop" parameterType="Integer" resultType="associationInfo">
        select association_id,association_name,association_icon
        from association
        order by apply_number limit #{count}
    </select>

    <select id="selectByCategory" parameterType="String" resultType="associationInfo">
        select association_id,association_name,association_icon
        from association
        where association_category = #{category}
    </select>

    <select id="getAssociationNames" resultType="associationInfo">
        select association_id,association_name
        from association
    </select>

    <update id="addApply" parameterType="integer"  >
        update association
        set apply_number = apply_number+1
        where association_id = #{id}
    </update>

    <select id="listAssociationIcon" resultMap="associationIcon">
        select picture_id, picture_path, association_name, association_id
        from association
    </select>

    <update id="updateAssociationIcon">
        update association
        set picture_id = #{pictureId},
            picture_path = #{picturePath}
        where association_id = #{associationId}
    </update>

    <update id="updateApplyStatus">
        update association
        set apply_enable = #{enable}
        where association_id = #{associationId}
    </update>
</mapper>